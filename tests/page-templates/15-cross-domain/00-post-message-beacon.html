<%= header %>
<%= boomerangScript %>

<script type="text/javascript">
BOOMR.utils.setCookie("RT", {}, -86400);
function handler(event) {
	var data = JSON.parse(event.data);
	if (data && data.dm) {
		window.childSessionData = data;
	}
}

if (window.addEventListener) {
	window.addEventListener("message", handler);
}
else {
	window.attachEvent("onmessage", handler);
}
</script>

<script src="00-post-message-beacon.js" type="text/javascript"></script>
<script>
var server = "<%= secondaryServer %>";
var host = server || window.location.hostname;
var port = (parseInt(window.location.port) || 4002) + 1;

BOOMR_test.init({
	testAfterOnBeacon: true,
	CrossDomain: {
		cross_domain_url: "http://" + host + ":" + port + "/pages/15-cross-domain/support/frameScriptSimple.html",
		sending: false
	}
});
</script>

<pre>
Simple test to ensure communication between Alias and main domain works

Q: Main, do you have a session to transfer?
+---------+        +----------+
|  Alias  +---?---->   Main   |
+---------+        +----------+

A: Yes!
+---------+        +----------+
|   Main  +---!---->   Alias  |
+---------+        +----------+

 - Ensures transfer duration is set, we know how long it took to transfer session info from main to alias
 - Ensures we did not timeout when requesting iframe/data
</pre>

<%= footer %>
