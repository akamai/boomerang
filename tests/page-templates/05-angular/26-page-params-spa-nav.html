<%= header %>
<%= boomerangScript %>
<base href="/pages/05-angular/" />
<script src="../../vendor/angular/angular.js"></script>
<script src="../../vendor/angular-resource/angular-resource.js"></script>
<script src="../../vendor/angular-route/angular-route.js"></script>
<script>
window.angular_imgs = [3000];

window.angular_html5_mode = false;

// view a widget then come back so debugging (F5) is easier
window.angular_nav_routes = ["/widgets/1", "/"];
</script>
<script src="support/app.js"></script>
<div ng-app="app">
	<div ng-view>
	</div>
</div>
<script src="/test-templates/spa/26-page-params-spa-nav.js" type="text/javascript"></script>
<script src="26-page-params-spa-nav.js" type="text/javascript"></script>
<script>
var img, xhr, beaconCount = 0;
BOOMR.subscribe("beacon", function(vars) {
	beaconCount++;
	if (beaconCount === 3) {
		setTimeout(function() {
			xhr = new XMLHttpRequest();
			xhr.open("GET", "/delay?delay=100&file=/pages/05-angular/support/widgets.json");
			xhr.addEventListener("load", function() {
				img = document.createElement("img");
				img.src = "/delay?delay=1000&id=xhr&file=/pages/05-angular/support/img.jpg";
				document.body.appendChild(img);
			});
			xhr.send(null);
		}, 100);
	}
});
BOOMR_test.init({
	testAfterOnBeacon: 4,
	Angular: {
		enabled: true
	},
	PageParams: {
		customTimers: [
			{
				name: "ResourceGroup Element after spa_hard",
				index: 1,
				label: "ctim.CT1",
				type: "ResourceGroup",
				value: {
					"*/26-page-params-spa-nav.html*": {
						on: ["spa_hard"],
						resources: [{
							type: "resource",
							value: "*id=home*"
						}]
					}
				}
			},
			{
				name: "ResourceGroup on spa",
				index: 2,
				label: "ctim.CT2",
				type: "ResourceGroup",
				value: {
					"*/26-page-params-spa-nav.html*": {
						on: ["spa"],
						resources: [{
							type: "resource",
							value: "*id=1*"
						}]
					}
				}
			},
			{
				name: "ResourceGroup on xhr",
				index: 3,
				label: "ctim.CT3",
				type: "ResourceGroup",
				value: {
					"*/26-page-params-spa-nav.html*": {
						on: ["xhr"],
						resources: [{
							type: "resource",
							value: "*id=xhr*"
						}]
					}
				}
			}
		]
	},
	instrument_xhr: true,
	autorun: false
});
</script>
<%= footer %>
