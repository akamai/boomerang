<%= header %>
<%= boomerangSnippet %>
<script src="02-page-group-xhrs.js" type="text/javascript"></script>
<script>
BOOMR_test.init({
    testAfterOnBeacon: typeof window.MutationObserver === "function" ? 2 : 1,
    instrument_xhr: true,
    PageParams: {
        pageGroups: [
            {
                type: "Regexp",
                parameter1: "/pages/.*",
                parameter2: "Test Pages"
            },
            {
                type: "Regexp",
                parameter1: "/pages/.*",
                parameter2: "XHR Test Pages_subresource"
            },
        ]
    }
});

function sendXhr() {
    var xhr;
    if (window.XMLHttpRequest) {
        xhr = new XMLHttpRequest();
    } else {
        xhr = new ActiveXObject("Microsoft.XMLHTTP");
    }

    xhr.open("GET", "/pages/blah", true);
    xhr.send();
}

// wait until Boomerang is loaded (and instrumented XHRs) to send
if (window.document.addEventListener) {
    window.document.addEventListener("onBoomerangLoaded", sendXhr);
} else if (window.document.attachEvent) {
    window.document.attachEvent("onBoomerangLoaded", sendXhr);
}

</script>
<%= footer %>
