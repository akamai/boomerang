<%= header %>
<script>
window.testV6Url = "test04";
window.testV6ReqMethod = "test04";
window.origXMLHttpRequestOpen = undefined;

// Override the XMLHttpRequest method with our own to test
// whether a v4 request is made using this API.
if (window.XMLHttpRequest && typeof window.XMLHttpRequest.prototype.open === "function") {
	origXMLHttpRequestOpen = window.XMLHttpRequest.prototype.open;

	window.XMLHttpRequest.prototype.open = function(methodType, destUrl, asynReq) {
		testV6ReqMethod = methodType;
		testV6Url = destUrl;
		origXMLHttpRequestOpen.call(this, methodType, destUrl, asynReq);
	};
}
</script>
<%= boomerangScript %>
<script src="04-akamai-mapping-xhr-v6-not-enabled.js" type="text/javascript"></script>
<script>
	BOOMR_test.init({
		testAfterOnBeacon: true,
		Akamai: {
			enabled: true,
			mapping_xhr_base_url: "akamaihd.net",
			mapping_xhr_url_path: "/eum/getdns.txt",
			// enable the V6 config parameter, so that the code block to evaluate the v4/v6 possibity
			// is exercised but set the ak.ipv add var param to be "4" which should prevent an XHR for
			// V6 from being sent.
			mapping_xhr_url_v6_prefix: "trial-eum-clientnsv6-s"
		}
	});
	BOOMR.addVar("ak.ipv", "4");
</script>
<%= footer %>
